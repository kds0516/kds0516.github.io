---
title: 로컬 스토리지에서 변수 업데이트 문제 해결하기
date: 2023-08-26 20:00:00 +0900
categories:
  - JavaScript
tags:
  - 자바스크립트
  - 로컬스토리지
---

## 문제 상황: `localStorage` 변수 업데이트 안됨

변수를 로컬 스토리지에 저장하려고 할 때, 예상과 다르게 변수가 업데이트되지 않는다면 굉장히 당혹스러울 것입니다. 이 문제를 해결하기 위해 자주 발생하는 오류와 그에 대한 해결 방안을 살펴보겠습니다.

### 오류명: Unpredictable Behavior in LocalStorage

## 원인 1: 문자열로 저장됨

로컬 스토리지는 모든 것을 문자열로 저장합니다. 따라서 숫자나 객체 같은 다른 타입의 데이터를 저장하면 예상치 못한 결과가 발생할 수 있습니다.

### 해결법

`JSON.stringify()`와 `JSON.parse()` 함수를 사용하여 데이터를 문자열로 변환한 뒤 다시 원래의 형태로 변환할 수 있습니다.

```javascript
localStorage.setItem('number', JSON.stringify(1));
const number = JSON.parse(localStorage.getItem('number'));
```

## 원인 2: 동기적 동작

`localStorage`는 동기적으로 동작하기 때문에, 연속적으로 데이터를 저장하고 읽을 때 문제가 발생할 수 있습니다.

### 해결법

코드의 실행 순서를 잘 관리하거나, 필요한 경우 `setTimeout` 함수를 사용하여 일정 시간을 두고 데이터를 저장하거나 불러옵니다.

```javascript
setTimeout(() => {
  localStorage.setItem('key', 'value');
}, 1000);
```

## 원인 3: 브라우저 지원 문제

모든 브라우저에서 `localStorage`가 완벽하게 지원되지는 않습니다. 특히 오래된 브라우저에서는 문제가 발생할 수 있습니다.

### 해결법

브라우저의 지원 여부를 확인한 후, 필요하다면 폴리필(polyfill)을 사용하여 브라우저의 기능을 확장할 수 있습니다.

## 정리

로컬 스토리지에서 변수 업데이트 문제는 주로 데이터 타입, 동기적 동작, 브라우저 지원 등의 이유로 발생합니다. 이러한 문제를 해결하기 위해 데이터 타입을 올바르게 관리하고, 코드의 실행 순서를 잘 조절하는 것이 중요합니다.